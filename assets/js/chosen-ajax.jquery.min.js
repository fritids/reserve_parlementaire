!function(a){var b,c,d,e,f;new Array;var h,i,j,k,l,m,n,o=function(b){d.cache[b.term]=b;var c,g,i;if(null!=b)return i=[],e.find("option").each(function(){return a(this).is(":selected")?i.push(a(this).val()+"-"+a(this).text()):a(this).remove()}),e.find("optgroup:empty").each(function(){return a(this).remove()}),c=null!=f?f(b,h):b,g=0,a.each(c,function(b,c){var d,f,h;return g++,c.group?(d=e.find("optgroup[label='"+c.text+"']"),d.size()||(d=a("<optgroup />")),d.attr("label",c.text).appendTo(e),a.each(c.items,function(b,c){var e,f;return"string"==typeof c?(f=b,e=c):(f=c.value,e=c.text),-1===a.inArray(f+"-"+e,i)?a("<option />").attr("value",f).html(e).appendTo(d):void 0})):("string"==typeof c?(h=b,f=c):(h=c.value,f=c.text),-1===a.inArray(h+"-"+f,i)?a("<option />").attr("value",h).html(f).appendTo(e):void 0)}),g?e.trigger("liszt:updated"):(e.data().chosen.no_results_clear(),e.data().chosen.no_results(h.val())),null!=m.success&&m.success(b),h.val(k)};return a.fn.ajaxChosen=function(g,p,q){return f=p,m=g,n=q,null==m&&(m={}),null==n&&(n={}),c={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Tapez au moins 3 lettres",lookingForMsg:"Recherche de",cache:new Array},e=this,b=null,d=a.extend({},c,a(e).data(),m),this.chosen(n?n:{}),this.each(function(){return a(this).next(".chzn-container").find(".search-field > input, .chzn-search > input").bind("keyup",function(){return k=a(this).val(),l=a.trim(a(this).val()),i=l.length<d.minTermLength?d.keepTypingMsg:d.lookingForMsg+(" '"+l+"'"),e.next(".chzn-container").find(".no-results").text(i),l===a(this).data("prevVal")?!1:(a(this).data("prevVal",l),this.timer&&clearTimeout(this.timer),l.length<d.minTermLength?!1:(h=a(this),null==d.data&&(d.data={}),d.data[d.jsonTermKey]=l,null!=d.dataCallback&&(d.data=d.dataCallback(d.data)),j=d.success,d.beforeSend=function(){var b=this.data.replace(d.jsonTermKey+"=","");return currentTerm=b,"undefined"!=typeof d.cache[b]?(o(d.cache[b]),!1):void 0},d.success=o,this.timer=setTimeout(function(){return b&&b.abort(),b=a.ajax(d)},d.afterTypeDelay)))})})}}(jQuery);